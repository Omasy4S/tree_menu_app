{% extends 'base.html' %}

{% block title %}Главная - Древовидное меню{% endblock %}

{% block content %}
<h1>Главная страница</h1>

<div class="info-box">
    <h3>О проекте</h3>
    <p>
        Это демонстрация работы Django приложения с древовидным меню.
        Меню реализовано с соблюдением всех требований:
    </p>
    <ul style="margin-left: 20px; margin-top: 10px;">
        <li>✅ Меню реализовано через template tag</li>
        <li>✅ Все, что над выделенным пунктом - развернуто</li>
        <li>✅ Первый уровень вложенности под выделенным пунктом тоже развернут</li>
        <li>✅ Хранится в БД</li>
        <li>✅ Редактируется в стандартной админке Django</li>
        <li>✅ Активный пункт меню определяется исходя из URL текущей страницы</li>
        <li>✅ Меню на одной странице может быть несколько</li>
        <li>✅ При клике на меню происходит переход по заданному URL</li>
        <li>✅ На отрисовку каждого меню требуется ровно 1 запрос к БД</li>
    </ul>
</div>

<h2>Как использовать</h2>
<p>
    1. Перейдите в админ-панель Django (<code>/admin/</code>)<br>
    2. Создайте меню через раздел "Меню"<br>
    3. Добавьте пункты меню с указанием родительских элементов<br>
    4. Используйте в шаблоне: <code>{% templatetag openblock %} draw_menu 'название_меню' {% templatetag closeblock %}</code>
</p>

<h2>Технические детали</h2>
<p>
    <strong>Оптимизация запросов к БД:</strong> Используется <code>select_related('menu', 'parent')</code>
    для загрузки всех связанных объектов в одном запросе. Построение дерева происходит в Python,
    без дополнительных обращений к базе данных.
</p>

<p>
    <strong>Определение активного пункта:</strong> Сравнивается <code>request.path</code> с URL каждого пункта меню.
    Для именованных URL используется <code>reverse()</code>.
</p>

<p>
    <strong>Логика раскрытия:</strong> Раскрываются элементы на пути к активному пункту (через parent)
    и прямые потомки активного элемента. Остальные скрыты через <code>display:none</code>.
</p>
{% endblock %}
